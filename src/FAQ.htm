<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>FAQ</title>
<link type="text/css" rel="stylesheet" href="fpdf.css">
<style type="text/css">
ul {list-style-type:none; margin:0; padding:0}
ul#answers li {margin-top:2em}
</style>
</head>
<body>
<h2>FAQ</h2>
<ul>
<li><b>1.</b> <a href='#q1'>Esattamente qual'è la licenza di FPDF? Ci sono limitazioni all'utilizzo?</a>
<li><b>2.</b> <a href='#q2'>Quando tento di creare un PDF, molti strani caratteri vengono visualizzati sullo schermo. Perché?</a>
<li><b>3.</b> <a href='#q3'>Quando provo a generare un PDF IE visualizza una pagina vuota. Che succede?</a>
<li><b>4.</b> <a href='#q4'>Invio i parametri utilizzando il metodo POST e i valori non appaiono nel PDF.</a>
<li><b>5.</b> <a href='#q5'>Quando uso una sessione PHP, IE non visualizza il mio PDF ma mi chiede di scaricarlo.</a>
<li><b>6.</b> <a href='#q6'>Quando sono su SSL, IE non riesce ad aprire il PDF.</a>
<li><b>7.</b> <a href='#q7'>Quando eseguo uno script viene visualizzato il messaggio "FPDF error: Don't alter the locale before including class file".</a>
<li><b>8.</b> <a href='#q8'>Provo ad inserire una immagine PNG e Acrobat dice "There was an error processing a page. A drawing error occurred".</a>
<li><b>9.</b> <a href='#q9'>Incontro il seguente errore quando tento di generare un PDF: Warning: Cannot add header information - headers already sent by (output started at script.php:X).</a>
<li><b>10.</b> <a href='#q10'>Provo a visualizzare una variabile nel metodo Header, ma non viene stampato nulla.</a>
<li><b>11.</b> <a href='#q11'>Ho definito i metodi Header e Footer nella mia classe PDF ma non appare nulla.</a>
<li><b>12.</b> <a href='#q12'>Non riesco a far funzionare le interruzioni di linea. Inserisco i \n nella stringa stampata da MultiCell ma non funziona.</a>
<li><b>13.</b> <a href='#q13'>Tento di inserire il simbolo dell'Euro ma non funziona.</a>
<li><b>14.</b> <a href='#q14'>Ho disegnato un frame di dimensioni molto precise, ma quando viene stampato noto alcune differenze.</a>
<li><b>15.</b> <a href='#q15'>Vorrei utilizzare l'intera superficie della pagina, ma quando stampo restano sempre alcuni margini. Come posso eliminarli?</a>
<li><b>16.</b> <a href='#q16'>Qual'è il limite delle dimensioni dei file che posso generare con FPDF?</a>
<li><b>17.</b> <a href='#q17'>Posso modificare un PDF con FPDF?</a>
<li><b>18.</b> <a href='#q18'>Vorrei creare un motore di ricerca in PHP e indicizzare i file PDF. Posso farlo utilizzando FPDF?</a>
<li><b>19.</b> <a href='#q19'>Posso convertire una pagina HTML in PDF con FPDF?</a>
<li><b>20.</b> <a href='#q20'>Posso concatenare files PDF con FPDF?</a>
</ul>
<ul id='answers'>

<li id='q1'>
<p><b>1.</b> <span class='st'>Esattamente qual'è la licenza di FPDF? Ci sono limitazioni all'utilizzo?</span></p>
FPDF è Freeware (come specificato all'inizio del file sorgente). Non ci sono limitazioni all'utilizzo.
Può essere utilizzato liberamete all'interno delle proprie applicazioni (commerciali e non), con o senza
modifiche.
</li>

<li id='q2'>
<p><b>2.</b> <span class='st'>Quando tento di creare un PDF, molti strani caratteri vengono visualizzati sullo schermo. Perché?</span></p>
Questi "strani" caratteri sono appunto il contenuto del tuo PDF. Questo comportamento è un difetto di IE6.
Quando esso riceve una pagina HTML, e successivamente un file PDF dallo stesso indirizzo, visualizza
quest'ultimo direttamente, senza lanciare Acrobat. Questo accade frequentemente durante lo sviluppo:
all'ultimo errore dello script viene inviata una pagina HTML e, dopo la correzione, arriva il PDF.
<br>
Per risolvere il problema, semplicemente chiudi e riavvia IE. Oppure vai ad un altro indirizzo e poi torna
indietro.
<br>
Per evitare questo tipo di inconvenienti durante lo sviluppo, puoi generare il PDF direttamente come file,
aprendolo poi da explorer.
</li>

<li id='q3'>
<p><b>3.</b> <span class='st'>Quando provo a generare un PDF IE visualizza una pagina vuota. Che succede?</span></p>
Anzitutto verifica di non aver inviato nulla al browser dopo il PDF (nemmeno uno spazio o un ritorno a capo).
Puoi inserire  la funzione exit() subito dopo la chiamata alla funzione Output() per essere sicuro.
<br>
Se ancora non funziona, significa che sei una vittima della "sindrome della pagina vuota". IE utilizzata
assieme al plug-in di Acrobat soffre di numerosi bugs, in tutte le versioni. Dovresti testare la tua
applicazione con il maggior numero possibile di versioni di IE (in ultimo se sei su Internet). Il problema
si manifesta specialmente con il metodo POST, quindi è caldamente raccomandato di evitarlo (anche perché
spesso causa altri problemi, vedi la domanda seguente). Il metodo GET lavora meglio, ma potrebbe non
funzionare se l'indirizzo diventa troppo lungo: non utilizzare una query string con più di 45 caratteri.
In ogni caso, esiste un trucco per superare questo limite: terminare l'indirizzo con l'estensione .pdf,
che inganna IE. Se utilizzi un form puoi inserire un campo nascosto alla fine:
<div class="doc-source">
<pre><code>&lt;input type=&quot;HIDDEN&quot; name=&quot;ext&quot; value=&quot;.pdf&quot;&gt;</code></pre>
</div>
Anche l'uso delle sessioni causa spesso problemi (evita di usare gli headers HTTP per impedire il
caricamento da cache). Vedi la domanda 5 per una possibile soluzione.
<br>
<br>
Per evitare questi problemi esistono due tecniche:
<br>
<br>
- Disabilitare il plug-in ed usare Acrobat come applicazione di supporto. Per fare questo, lancia Acrobat;
nel menu File, Preferences, General, deseleziona l'opzione "Web Browser Integration" (per Acrobat 5: Edit,
Preferences, Options, "Display PDF in Browser"). La prossima volta che caricherai un PDF da IE, ti verrà
mostrata la finestra di dialogo con le opzioni "Apri il file dal percorso corrente" e "Salva il file su
disco". Deseleziona l'opzione "Avvisa sempre prima di aprire questo tipo di file" e seleziona Apri.
D'ora in poi, i file PDF verranno automaticametne aperti in una finestra di Acrobat.
<br>
Lo svantaggio di questo sistema è la necessità di alterare la configurazione del client, cosa fattibile
in una rete privata, ma non su Internet.
<br>
<br>
- Utilizzare una tecnica di reindirizzamento. Consiste nel generare il PDF in un file temporaneo sul
server e reindirizzare il client a esso. Per esempio, alla fine dello script, puoi inserire quanto segue:
<div class="doc-source">
<pre><code>//Determina il nome del file temporaneo nella directory corrente
$file=basename(tempnam('.','tmp'));
rename($file,$file.'.pdf');
$file.='.pdf';
//Salva il PDF come file
$pdf-&gt;Output($file);
//Reindirizzamento JavaScript
echo &quot;&lt;html&gt;&lt;head&gt;&lt;script&gt;document.location='$file';&lt;/script&gt;&lt;/head&gt;&lt;/html&gt;&quot;;</code></pre>
</div>
Questo metodo converte il PDF dinamico in uno statico ed evita ogni problema. E' tuttavia necessario
eliminare i file temporanei. Per esempio in questo modo:
<div class="doc-source">
<pre><code>function CleanFiles($dir)
{
    //Cancella i files temporanei
    $t=time();
    $h=opendir($dir);
    while($file=readdir($h))
    {
        if(substr($file,0,3)=='tmp' and substr($file,-4)=='.pdf')
        {
            $path=$dir.'/'.$file;
            if($t-filemtime($path)&gt;3600)
                @unlink($path);
        }
    }
    closedir($h);
}</code></pre>
</div>
Questa funzione cancella tutti i files il cui nome sia nel formato tmp*.pdf (dove * rappresenta una
stringa qualsiasi) più vecchi di un'ora dalla directory specificata. Puoi chiamarla dove vuoi, ad
esempio nello script che genera il PDF.
<br>
<br>
Nota bene: è necessario aprire il PDF in una nuova finestra, in modo che non sia possibile tornare
alla pagina che reindirizza.
</li>

<li id='q4'>
<p><b>4.</b> <span class='st'>Invio i parametri utilizzando il metodo POST e i valori non appaiono nel PDF.</span></p>
E' un problema che affligge alcune versioni di IE (specialmente la 5.5). Vedi la domanda precedente per sapere come aggirarlo.
</li>

<li id='q5'>
<p><b>5.</b> <span class='st'>Quando uso una sessione PHP, IE non visualizza il mio PDF ma mi chiede di scaricarlo.</span></p>
E' un problema che affligge alcune versioni di IE. Per aggirarlo, aggiungi il seguente codice prima di session_start():
<div class="doc-source">
<pre><code>session_cache_limiter('private');</code></pre>
</div>
o utilizza un reindirizzamento come spiegato nella domanda 3.
</li>

<li id='q6'>
<p><b>6.</b> <span class='st'>Quando sono su SSL, IE non riesce ad aprire il PDF.</span></p>
Il problema può essere risolto aggiungendo questo codice:
<div class="doc-source">
<pre><code>Header('Pragma: public');</code></pre>
</div>
</li>

<li id='q7'>
<p><b>7.</b> <span class='st'>Quando eseguo uno script viene visualizzato il messaggio "FPDF error: Don't alter the locale before including class file".</span></p>
Quando il separatore decimale è configurato come una virgola prima di includere un file, c'è un <A HREF="http://bugs.php.net/bug.php?id=17105" TARGET="_blank">bug</A> in PHP e i numeri decimali vengono troncati. Quindi non è possibile effettuare una chiamata a setlocale() prima di includere la classe. Su Unix, non è possibile nemmeno impostare la variabile di ambiente LC_ALL, in quanto equivalente ad una chiamata a setlocale().
</li>

<li id='q8'>
<p><b>8.</b> <span class='st'>Provo ad inserire una immagine PNG e Acrobat dice "There was an error processing a page. A drawing error occurred".</span></p>
Acrobat 5 soffre di un bug e non è in grado di visualizzare immagini trasparenti monocromatiche (ad esempio con 1 bit per pixel). Rimuovi la trasparenza oppure salva l'immagine in 16 colori (4 bits per pixel) o di più.
</li>

<li id='q9'>
<p><b>9.</b> <span class='st'>Incontro il seguente errore quando tento di generare un PDF: Warning: Cannot add header information - headers already sent by (output started at script.php:X).</span></p>
E' indispensabile non inviare niente al browser eccetto il PDF stesso: niente HTML, niente spazi, niente ritorni a capo, nè prima nè dopo. Lo script invia qualcosa alla linea X.
</li>

<li id='q10'>
<p><b>10.</b> <span class='st'>Provo a visualizzare una variabile nel metodo Header, ma non viene stampato nulla.</span></p>
Devi usare le variabili <tt>global</tt>, ad esempio:
<div class="doc-source">
<pre><code>function Header()
{
    global $title;

    $this-&gt;SetFont('Arial','B',15);
    $this-&gt;Cell(0,10,$title,1,1,'C');
}</code></pre>
</div>
</li>

<li id='q11'>
<p><b>11.</b> <span class='st'>Ho definito i metodi Header e Footer nella mia classe PDF ma non appare nulla.</span></p>
Devi creare un oggetto dalla classe PDF, non FPDF:
<div class="doc-source">
<pre><code>$pdf = new PDF();</code></pre>
</div>
</li>

<li id='q12'>
<p><b>12.</b> <span class='st'>Non riesco a far funzionare le interruzioni di linea. Inserisco i \n nella stringa stampata da MultiCell ma non funziona.</span></p>
Devi chiudere la stringa tra virgolette, non tra apici singoli.
</li>

<li id='q13'>
<p><b>13.</b> <span class='st'>Tento di inserire il simbolo dell'Euro ma non funziona.</span></p>
I font standard hanno il simbolo dell'euro alla posizione 128. Puoi definire per convenienza una costante come questa:
<div class="doc-source">
<pre><code>define('EURO', chr(128));</code></pre>
</div>
</li>

<li id='q14'>
<p><b>14.</b> <span class='st'>Ho disegnato un frame di dimensioni molto precise, ma quando viene stampato noto alcune differenze.</span></p>
Per rispettare le dimensioni, devi desekezionare l'opzione "Fit to page" nella finestra di dialogo di stampa.
</li>

<li id='q15'>
<p><b>15.</b> <span class='st'>Vorrei utilizzare l'intera superficie della pagina, ma quando stampo restano sempre alcuni margini. Come posso eliminarli?</span></p>
Tutte le stampanti hanno dei margini fisici (diversi a seconda del modello), ed è quindi impossibile rimuoverli e stampare su tutta la superficie della carta.
</li>

<li id='q16'>
<p><b>16.</b> <span class='st'>Qual'è il limite delle dimensioni dei file che posso generare con FPDF?</span></p>
Non c'è un limite particolare. Ci sono comunque alcune restrizioni:
<br>
<br>
- La massima dimensione di memoria allocata per gli script PHP è impostata di default a 8 MB. Per documenti molto grandi, specialmetne con immagini, questo limite potrebbe essere raggiunto (il file viene generato nella memoria). Questo parametro è configurabile nel file php.ini.
<br>
<br>
- Il tempo massimo di esecuzione è impostato di default a 30 secondi. Questo limite può naturalmente essere raggiunto con facilità. E' configurato nel file php.ini e può essere alterato dinamicamente con la funzione set_time_limit().
<br>
<br>
- I browser hanno generalmente un timeout di 5 minuti. Se il PDF viene inviato direttamente al browser e il limite viene raggiunto, il file verrà perduto. E' quindi consigliabile generare i documenti di grandi dimensioni come files, e inviare i dati al browser poco a poco (per esempio, pagina 1, pagina 2... con la funzione flush() per forzare l'output). Quando il documento è completo, è possibile reindirizzare ad esso con JavaScript o creando un link.
<br>
Nota bene: anche se il browser va in timeout, lo script continuerà a girare sul server.
</li>

<li id='q17'>
<p><b>17.</b> <span class='st'>Posso modificare un PDF con FPDF?</span></p>
No.
</li>

<li id='q18'>
<p><b>18.</b> <span class='st'>Vorrei creare un motore di ricerca in PHP e indicizzare i file PDF. Posso farlo utilizzando FPDF?</span></p>
No, ma esiste una utility scritta in C e rilasciata sotto licenza GPL, pdftotext, che consente di estrarre
il contenuto testuale da un PDF. E' fornita col il pacchetto Xpdf:<br>
<br>
<a href="http://www.foolabs.com/xpdf/" target="_blank">http://www.foolabs.com/xpdf/</a>
</li>

<li id='q19'>
<p><b>19.</b> <span class='st'>Posso convertire una pagina HTML in PDF con FPDF?</span></p>
htmldoc, che permette di farlo ottenendo buoni risultati:<br>
<br>
<a href="http://www.htmldoc.org" target="_blank">http://www.htmldoc.org</a>
</li>

<li id='q20'>
<p><b>20.</b> <span class='st'>Posso concatenare files PDF con FPDF?</span></p>
No, ma esistano programmi gratuiti per farlo:<br>
<br>
<a href="http://thierry.schmit.free.fr/spip/spip.php?article15&amp;lang=en" target="_blank">mbtPdfAsm</a><br>
<a href="http://www.accesspdf.com/pdftk/" target="_blank">pdftk</a>
</li>
</ul>
</body>
</html>
